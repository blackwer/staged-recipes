{% set version = "v0.9.1" %}
{% set name = "baobzi" %}
{% set sha256 = "135df542846b3fec402a0b3ba7728e978bb7595cf18f6e2cdad3bfb6374b2c65" %}

package:
  name: {{ name }}
  version: {{ version }}

source:
  # Needs recursive checkout from git_url rather than tarball until I can add something like
  # FetchContent to the cmake build. Or github actions
  git_url: https://github.com/flatironinstitute/{{ name }}
  git_tag: {{ version }}
  # url: https://github.com/flatironinstitute/{{ name }}/archive/{{ version }}.tar.gz
  # sha256: {{ sha256 }}

build:
  number: 0
  skip: True  # [win and py2k]
  script: "{{ PYTHON }} -m pip install . -vv"

requirements:
  build:
    - {{ compiler('cxx') }}
    - cmake>=3.05
  host:
    - python
    - setuptools
    - ninja
    - wheel
    - scikit-build
  run:
    - python
    - numpy

test:
  imports:
    - baobzi

about:
  home: http://github.com/flatironinstitute/baobzi
  license: Apache-2.0
  license_file: LICENSE
  summary: An adaptive fast function approximator based on tree search.
  description: |
    baobzi is a tool to convert very CPU intensive function calculations into relatively cheap
    ones (at the cost of memory). This is similar to functions like chebeval in MATLAB, but can
    be significantly faster since the order of the polynomial fit can be much much lower to
    meet similar tolerances. It also isn't constrained for use only in MATLAB.

extra:
  recipe-maintainers:
    - blackwer
